<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interest Calculator</title>
    <style>
        .language-label, .whatsapp-btn {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <h1>Interest Calculator</h1>

    <!-- Choose Language and Phone Number Input -->
    <div>
        <label class="language-label" for="languageSelector">Choose Language:</label>
        <select id="languageSelector" onchange="updateLanguage()">
            <option value="">Select</option>
            <option value="en">English</option>
            <option value="te">Telugu</option>
            <option value="hi">Hindi</option>
        </select>
        
        <!-- Phone number input -->
        <label for="phoneInput">Phone Number:</label>
        <input type="tel" id="phoneInput" placeholder="Enter phone number">
    </div>

    <!-- Interest Table -->
    <table border="1" id="interestTable">
        <thead>
            <tr>
                <th>Principal Amount</th>
                <th>Rate (%)</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Interest</th>
                <th>Total Amount</th>
            </tr>
        </thead>
        <tbody id="interestBody">
            <tr id="row1">
                <td><input type="number" id="amount1" oninput="calculateInterest(1)"></td>
                <td><input type="number" id="rate1" oninput="calculateInterest(1)"></td>
                <td><input type="date" id="start1" onchange="calculateInterest(1)"></td>
                <td><input type="date" id="end1" onchange="calculateInterest(1)"></td>
                <td id="interest1">0</td>
                <td id="total1">0</td>
            </tr>
        </tbody>
    </table>

    <button onclick="addRow()">Add Row</button>
    <button onclick="removeRow()">Remove Row</button>

    <!-- Total Display -->
    <p>Total Interest: <span id="totalInterestDisplay">0</span></p>
    <p>Total Amount: <span id="totalAmountDisplay">0</span></p>

    <!-- Share on WhatsApp Button -->
    <button class="whatsapp-btn" onclick="shareOnWhatsApp()">Share on WhatsApp</button>

    <!-- Signature Block -->
    <div id="signatureBlock">
        <label for="signature">Enter Signature:</label>
        <input type="text" id="signature" placeholder="Your Signature">
    </div>

    <script>
        let rowCount = 1;

        // Function to calculate interest and total amount
        function calculateInterest(row) {
            let principal = document.getElementById('amount' + row).value;
            let rate = document.getElementById('rate' + row).value;
            let startDate = new Date(document.getElementById('start' + row).value);
            let endDate = new Date(document.getElementById('end' + row).value);
            
            if (principal && rate && startDate && endDate) {
                let timeDiff = Math.abs(endDate - startDate);
                let daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));

                let interest = (principal * rate * daysDiff) / (365 * 100);
                document.getElementById('interest' + row).innerText = interest.toFixed(2);
                
                let total = parseFloat(principal) + interest;
                document.getElementById('total' + row).innerText = total.toFixed(2);
                
                calculateTotal();
            }
        }

        // Function to calculate the total interest and amount
        function calculateTotal() {
            let totalInterest = 0;
            let totalAmount = 0;
            
            for (let i = 1; i <= rowCount; i++) {
                let interest = parseFloat(document.getElementById('interest' + i).innerText);
                let total = parseFloat(document.getElementById('total' + i).innerText);
                
                totalInterest += interest;
                totalAmount += total;
            }
            
            document.getElementById('totalInterestDisplay').innerText = totalInterest.toFixed(2);
            document.getElementById('totalAmountDisplay').innerText = totalAmount.toFixed(2);
        }

        // Function to add a new row
        function addRow() {
            rowCount++;
            let newRow = document.createElement('tr');
            newRow.id = 'row' + rowCount;
            newRow.innerHTML = `
                <td><input type="number" id="amount${rowCount}" oninput="calculateInterest(${rowCount})"></td>
                <td><input type="number" id="rate${rowCount}" oninput="calculateInterest(${rowCount})"></td>
                <td><input type="date" id="start${rowCount}" onchange="calculateInterest(${rowCount})"></td>
                <td><input type="date" id="end${rowCount}" onchange="calculateInterest(${rowCount})"></td>
                <td id="interest${rowCount}">0</td>
                <td id="total${rowCount}">0</td>
            `;
            document.getElementById('interestBody').appendChild(newRow);
        }

        // Function to remove the last row
        function removeRow() {
            if (rowCount > 1) {
                document.getElementById('row' + rowCount).remove();
                rowCount--;
                calculateTotal();
            }
        }

        // Function to share the details on WhatsApp
        function shareOnWhatsApp() {
            let phoneNumber = document.getElementById('phoneInput').value.trim();
            if (phoneNumber === '') {
                alert('Please enter a phone number.');
                return;
            }

            let totalInterest = document.getElementById('totalInterestDisplay').innerText;
            let totalAmount = document.getElementById('totalAmountDisplay').innerText;

            // Collect details for each row
            let message = '';
            for (let i = 1; i <= rowCount; i++) {
                let principal = document.getElementById('amount' + i).value;
                let rate = document.getElementById('rate' + i).value;
                let startDate = document.getElementById('start' + i).value;
                let endDate = document.getElementById('end' + i).value;
                let interest = document.getElementById('interest' + i).innerText;
                let total = document.getElementById('total' + i).innerText;
                
                message += `Principal: ${principal}, Rate: ${rate}%, Start Date: ${startDate}, End Date: ${endDate}, Interest: ${interest}, Total: ${total}\n`;
            }

            message += `\nTotal Interest: ${totalInterest}\nTotal Amount: ${totalAmount}`;

            // WhatsApp API URL
            let whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;

            // Open WhatsApp with the details
            window.open(whatsappUrl, '_blank');
        }

        // Placeholder for language update function
        function updateLanguage() {
            // Code for changing language content
        }
    </script>
</body>
</html>
